#:kivy 1.0
MainFrameWidget: 

<MainFrameWidget>:
    LabHeaderWidget:

<ManualScreen>:
    BoxLayout:
        orientation: 'vertical'
        # Camera status label
        BoxLayout:
            orientation: 'vertical'
            size_hint_y: .1
            Label:
                id: camera_status
                text: 'Manual menu || camera status off'
                bold: True

        # Camera control buttons
        GridLayout:
            cols: 2
            size_hint_y: .1
            Button:
                text: 'Stop camera'
                background_color: (.4, .4, .4, 1)
                on_press: root.call_close_camera()
            Button:
                text: 'Start camera'
                background_color: (.4, .4, .4, 1)
                on_press: root.call_open_camera()

        # Area for camera image and cropping interaction
        BoxLayout:
            orientation: 'vertical'
            canvas:
                Color:
                    rgba: 1, 1, 1, 1
                Rectangle:
                    pos: self.pos
                    size: self.size
            Image:
                id: manual_cam_image
                size: self.size
                allow_stretch: True
                keep_ratio: True
                # pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                # Ensure the Image widget doesn't consume touch events
                on_touch_down: None
                on_touch_move: None
                on_touch_up: None

        BoxLayout:
            pos_hint: {"center_x":.5}
            size_hint_y: .3
            canvas.before:
                Color:
                    rgba: (.1,.1,.1,1)
                Rectangle: 
                    pos:self.pos
                    size: self.size

            GridLayout:
                rows: 4
                BoxLayout:
                    Label:
                        text: 'Center target'
                        bold: True
                        font_size: 25
                    Label:
                        id: manual_center_target_position
                        text:'Null'
                        bold: True
                        font_size: 25
                BoxLayout:
                    Label:
                        text: 'Center frame'
                        bold: True
                        font_size: 25
                    Label:
                        id: manual_center_frame_position
                        text:'Null'
                        bold: True
                        font_size: 25
                GridLayout:
                    cols: 2
                    Label:
                        text: 'Error center'
                        bold: True
                        font_size: 25
                    Label:
                        id: manual_error_center
                        text: 'Null'
                        bold: True
                        font_size: 25

                GridLayout:
                    cols: 1
                    BoxLayout:
                        Label:
                            text: 'Bounding box frame'
                            bold: True
                            font_size: 25
                        Label:
                            id: manual_bounding_frame_position
                            text:'Null'
                            bold: True
                            font_size: 25
            GridLayout:
                cols: 2
                spacing: 20
                GridLayout:
                    rows: 3
                    GridLayout:
                        cols: 3
                        Label:
                            text:""
                        Button:
                            text: 'Upper'
                            on_press: root.push_upper()
                        Label:
                            text:""
                    GridLayout:
                        cols: 3
                        Button:
                            text: 'left'
                            on_press: root.push_left()
                        Label:
                            text:"..."
                        Button:
                            text:'right'
                            on_press: root.push_right()
                    GridLayout:
                        cols: 3
                        Label:
                            text:""
                        Button:
                            text: 'Down'
                            on_press: root.push_down()
                        Label:
                            text:""
                Button:
                    text: 'Capture'
                    size_hint_x: .35

        # BoxLayout:
        #     orientation: 'vertical'
        #     size_hint_y: .25
        #     GridLayout:
        #         cols: 2
        #         GridLayout:
        #             rows: 5
        #             BoxLayout:
        #                 orientation: "horizontal"
        #                 Label:
        #                     text: 'X'
        #                 TextInput:
        #                     id: x_frame_bb
        #                     hint_text: ""
        #                     multiline: False
        #             BoxLayout:
        #                 orientation: "horizontal"
        #                 Label:
        #                     text: 'Y'
        #                 TextInput:
        #                     id: y_frame_bb
        #                     hint_text: ""
        #                     multiline: False
        #             BoxLayout:
        #                 orientation: "horizontal"
        #                 Label:
        #                     text: 'W'
        #                 TextInput:
        #                     id: w_frame_bb
        #                     hint_text: ""
        #                     multiline: False
        #             BoxLayout:
        #                 orientation: "horizontal"
        #                 Label:
        #                     text: 'H'
        #                 TextInput:
        #                     id: h_frame_bb
        #                     hint_text: ""
        #                     multiline: False
                # Button:
                #     size_hint_x: .15
                #     text: 'crop'
                #     on_press: root.crop_frame_start()

<SetAutoScreen>:
    BoxLayout:
        orientation: 'vertical'
        BoxLayout:
            orientation: 'vertical'
            size_hint_y: .1
            Label:
                id: camera_status_auto_mode
                text: 'Auto menu || camera status off'
                bold: True
        Image:
            id: auto_cam_image
            size: self.size
            allow_stretch: True
            keep_ratio: True
            # pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            # Ensure the Image widget doesn't consume touch events
            on_touch_down: None
            on_touch_move: None
            on_touch_up: None
            
        BoxLayout:
            orientation: 'vertical'
            size_hint_y: .45
            GridLayout:
                rows: 5
                Label:
                    id: auto_lable_mode
                    text: "Auto mode stopped"
                    bold: True
                    font_size: 35
                    canvas.before:
                        Color: 
                            rgba: (.2,.2,.2,1)
                        Rectangle:
                            pos:self.pos
                            size:self.size
                GridLayout:
                    cols: 2
                    BoxLayout:
                        Label:
                            text: 'Center target positon'
                            bold: True
                            font_size: 25
                        Label:
                            id: auto_center_target_position
                            text:'Null'
                            bold: True
                            font_size: 25

                    BoxLayout:
                        Label:
                            text: 'Center frame positon'
                            bold: True
                            font_size: 25
                        Label:
                            id: auto_center_frame_position
                            text:'Null'
                            bold: True
                            font_size: 25
                GridLayout:
                    cols: 2
                    Label:
                        text: 'Error center'
                        bold: True
                        font_size: 25
                    Label:
                        id: auto_error_center
                        text: 'Null'
                        bold: True
                        font_size: 25

                GridLayout:
                    cols: 1
                    BoxLayout:
                        Label:
                            text: 'Bounding box frame'
                            bold: True
                            font_size: 25
                        Label:
                            id: auto_bounding_frame_position
                            text:'Null'
                            bold: True
                            font_size: 25

                GridLayout:
                    cols: 2
                    Button:
                        text: 'Auto off'
                        on_press: root.call_close_camera()
                    Button:
                        text: 'Auto on'
                        on_press: root.call_open_camera()



<SettingScreen>:
    BoxLayout:
        orientation: 'vertical'
        GridLayout:
            cols: 2
            BoxLayout:
                orientation: 'vertical'
                Label:
                    text: "Helio stats ip"

                RecycleView:
                    id: list_helio_stats_ip
                    viewclass: 'Label'  # Each item will be a Label widget
                    RecycleBoxLayout:
                        default_size: None, dp(40)
                        default_size_hint: 1, None
                        size_hint_y: None
                        height: self.minimum_height
                        orientation: 'vertical'


                    
            # BoxLayout:
            #     orientation: 'vertical'
            #     Label:
            #         text:"Camera ip"
            #     BoxLayout:
            #         orientation: 'vertical'
            #         GridLayout:
            #             cols: 2
            #             Label:
            #                 id: list_camera_ip
            #                 text: "null"
            #             Button:
            #                 text: 'remove'


        BoxLayout:
            orientation: 'vertical'
            BoxLayout:
                orientation: 'vertical'
                Label:
                    text: 'Camera setting'
                    halign: 'left'
                    bold: True
                    text_size: self.size  # Ensures the text fits within the Label's width
                    padding_x: 10  # Optional: Add padding if you want to move it a bit inwar
                BoxLayout:
                    orientation: 'horizontal'
                    size_hint_y: .32
                    TextInput:
                        id: camera_ip
                        hint_text: "Enter camera ip"
                    Button:
                        width: 120
                        size_hint_x: None
                        text: 'add'
                        on_press: root.func_adding_camera_array_ip()
            
        BoxLayout:
            orientation: 'vertical'
            Label:
                text: 'Helio stats setting'
                halign: 'left'
                bold: True
                text_size: self.size  # Ensures the text fits within the Label's width
                padding_x: 10  # Optional: Add padding if you want to move it a bit inwar
            BoxLayout:
                orientation: 'horizontal'
                size_hint_y: .32
                TextInput:
                    id: helio_stats_id
                    hint_text: "Enter helio stats id"
                TextInput:
                    id: helio_stats_ip
                    hint_text: "Enter helio stats ip"
                Button:
                    width: 120
                    size_hint_x: None
                    text: 'add'
                    on_press: root.func_adding_array_helio_stats()
                    


<LabHeaderWidget>:
    orientation: 'vertical'
    BoxLayout:
        size_hint_y: None
        height: 100
        canvas.before:
            Color: 
                rgba: (.3,.3,.3,1)
            Rectangle: 
                pos:self.pos
                size:self.size
        Button:
            text: "Manual"
            on_press: root.ids.screen_manager.current = 'manual'
        Button:
            text: "Auto mode"
            on_press: root.ids.screen_manager.current = 'auto'
        Button:
            text: "Setting"
            on_press: root.ids.screen_manager.current = 'setting'

    ScreenManager:
        id: screen_manager
        ManualScreen:
            name: 'manual'
        SetAutoScreen:
            name: 'auto'
        SettingScreen:
            name: 'setting'

